cmake_minimum_required(VERSION 3.22.1)

project(projectmtv)

# Find required packages
find_library(log-lib log)
find_library(GLESv2-lib GLESv2)
find_library(android-lib android)

# Add the main projectM library
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/../../../.. projectm_build)

# Create our JNI wrapper library
add_library(projectmtv SHARED jni_simple.cpp)

# Include projectM headers
target_include_directories(projectmtv PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/../../../../src/libprojectM
    ${CMAKE_CURRENT_SOURCE_DIR}/../../../../src/api/include
)

# Link libraries
target_link_libraries(projectmtv
    projectM
    ${log-lib}
    ${GLESv2-lib}
    ${android-lib}
)

# Set C++ standard
set_target_properties(projectmtv PROPERTIES
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
)
